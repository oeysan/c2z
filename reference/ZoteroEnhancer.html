<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Enhance Zotero Records with External Metadata via Zotero Lookups — ZoteroEnhancer • c2z</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Enhance Zotero Records with External Metadata via Zotero Lookups — ZoteroEnhancer"><meta name="description" content="This function iterates over a data frame (or tibble) of Zotero records and attempts to enhance
each record by retrieving additional metadata from external sources. It uses DOI or ISBN information,
via the c2z package, to fetch external metadata and then merges these updates into the original
Zotero record. Special handling is provided for records representing book sections."><meta property="og:description" content="This function iterates over a data frame (or tibble) of Zotero records and attempts to enhance
each record by retrieving additional metadata from external sources. It uses DOI or ISBN information,
via the c2z package, to fetch external metadata and then merges these updates into the original
Zotero record. Special handling is provided for records representing book sections."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">c2z</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0.9005</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/c2z_public.html">Public library</a></li>
    <li><a class="dropdown-item" href="../articles/c2z_vignette.html">Behold c2z!</a></li>
    <li><a class="dropdown-item" href="../articles/zotero_api.html">Create a Zotero API key</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item"><a class="nav-link" href="../TODO.html">Todo</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="http://twitter.com/motsegn" aria-label="Twitter"><span class="fa fa-twitter"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/oeysan/c2z/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Enhance Zotero Records with External Metadata via Zotero Lookups</h1>
      <small class="dont-index">Source: <a href="https://github.com/oeysan/c2z/blob/main/R/zotero_enhancer.R" class="external-link"><code>R/zotero_enhancer.R</code></a></small>
      <div class="d-none name"><code>ZoteroEnhancer.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function iterates over a data frame (or tibble) of Zotero records and attempts to enhance
each record by retrieving additional metadata from external sources. It uses DOI or ISBN information,
via the <code>c2z</code> package, to fetch external metadata and then merges these updates into the original
Zotero record. Special handling is provided for records representing book sections.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">ZoteroEnhancer</span><span class="op">(</span></span>
<span>  <span class="va">zotero.data</span>,</span>
<span>  external.data <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  use.doi <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  use.semantic <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  use.isbn <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-zotero-data">zotero.data<a class="anchor" aria-label="anchor" href="#arg-zotero-data"></a></dt>
<dd><p>A data frame (or tibble) containing Zotero records. Each row represents a record
that may include fields such as <code>abstractNote</code>, <code>DOI</code>, <code>url</code>, <code>ISBN</code>,
<code>key</code>, <code>itemType</code>, <code>pages</code>, and <code>creators</code>.</p></dd>


<dt id="arg-external-data">external.data<a class="anchor" aria-label="anchor" href="#arg-external-data"></a></dt>
<dd><p>Optional. A data frame or list containing pre-fetched external metadata.
If provided and non-empty, the function will use this external metadata to update the Zotero records
instead of querying the external APIs. Defaults to <code>NULL</code>.</p></dd>


<dt id="arg-use-doi">use.doi<a class="anchor" aria-label="anchor" href="#arg-use-doi"></a></dt>
<dd><p>Logical; if <code>TRUE</code> (default), the function will attempt to retrieve external metadata
using DOI information. Defaults to <code>TRUE</code>.</p></dd>


<dt id="arg-use-semantic">use.semantic<a class="anchor" aria-label="anchor" href="#arg-use-semantic"></a></dt>
<dd><p>Logical; if <code>TRUE</code> (default), the function will attempt to retrieve external metadata
from Semantic Scholar using DOI information. Defaults to <code>TRUE</code>.</p></dd>


<dt id="arg-use-isbn">use.isbn<a class="anchor" aria-label="anchor" href="#arg-use-isbn"></a></dt>
<dd><p>Logical; if <code>TRUE</code> (default), the function will attempt to retrieve external metadata
using ISBN information when DOI retrieval is not successful. Defaults to <code>TRUE</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A data frame containing the enhanced Zotero records with external metadata merged into the original records.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>For each record in <code>zotero.data</code>, the function performs the following steps:</p>
<ol><li><p>If <code>external.data</code> is provided and non-empty, that data is used to update the record.</p></li>
<li><p>Otherwise, the function skips processing the record if an abstract already exists.</p></li>
<li><p>It then attempts to extract a DOI from the <code>DOI</code> field, or if missing, from the <code>url</code> field.</p></li>
<li><p>The <code>ISBN</code> field is processed by removing spaces and extracting the first value (in case of comma separation).</p></li>
<li><p>If a valid DOI is found and <code>use.doi</code> is <code>TRUE</code>, external metadata is retrieved using <code><a href="ZoteroDoi.html">c2z::ZoteroDoi()</a></code>.
        Otherwise, if an ISBN is available and <code>use.isbn</code> is <code>TRUE</code>, metadata is retrieved using <code><a href="ZoteroIsbn.html">c2z::ZoteroIsbn()</a></code>.</p></li>
<li><p>Once external metadata is successfully retrieved, an internal helper function <code>UpdateTibble</code> is called.
        This helper function merges the external metadata into the original record. For book sections, additional
        adjustments are made to handle creator information, pages, and edition fields.</p></li>
<li><p>Finally, the enhanced record is merged back into the original data frame using <code><a href="UpdateInsert.html">UpdateInsert()</a></code>.</p></li>
</ol></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span>  <span class="co"># Enhance Zotero records using DOI/ISBN lookup:</span></span></span>
<span class="r-in"><span>  <span class="va">example</span> <span class="op">&lt;-</span> <span class="fu"><a href="Cristin.html">Cristin</a></span><span class="op">(</span><span class="st">"762394"</span>, silent <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">$</span><span class="va">results</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">example</span><span class="op">$</span><span class="va">libraryCatalog</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">example</span><span class="op">$</span><span class="va">DOI</span> <span class="op">&lt;-</span> <span class="st">"https://doi.org/10.22358/jafs/74164/2007"</span></span></span>
<span class="r-in"><span>  <span class="va">enhanced.data</span> <span class="op">&lt;-</span> <span class="fu">ZoteroEnhancer</span><span class="op">(</span><span class="va">example</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">enhanced.data</span><span class="op">$</span><span class="va">libraryCatalog</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Øystein Olav Skaar.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

