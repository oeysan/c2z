<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Check and Convert ISBN — CheckIsbn • c2z</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Check and Convert ISBN — CheckIsbn"><meta name="description" content='This function processes an input string that contains an ISBN (or a compound string
where the first element is the ISBN). It first removes unwanted characters (keeping only digits, commas, and spaces),
then uses the GoFish function to further process the string. The function splits the cleaned string by spaces or commas
to extract a candidate ISBN. If the candidate ISBN is in ISBN10 format, it is converted to ISBN13 by prepending "978",
recalculating the check digit, and concatenating the result. Finally, the function validates that the resulting ISBN is a valid ISBN13,
i.e., it is 13 digits long and starts with either "978" or "979".'><meta property="og:description" content='This function processes an input string that contains an ISBN (or a compound string
where the first element is the ISBN). It first removes unwanted characters (keeping only digits, commas, and spaces),
then uses the GoFish function to further process the string. The function splits the cleaned string by spaces or commas
to extract a candidate ISBN. If the candidate ISBN is in ISBN10 format, it is converted to ISBN13 by prepending "978",
recalculating the check digit, and concatenating the result. Finally, the function validates that the resulting ISBN is a valid ISBN13,
i.e., it is 13 digits long and starts with either "978" or "979".'></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">c2z</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0.9016</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/c2z_public.html">Public library</a></li>
    <li><a class="dropdown-item" href="../articles/c2z_vignette.html">Behold c2z!</a></li>
    <li><a class="dropdown-item" href="../articles/zotero_api.html">Create a Zotero API key</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item"><a class="nav-link" href="../TODO.html">Todo</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="http://twitter.com/motsegn" aria-label="Twitter"><span class="fa fa-twitter"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/oeysan/c2z/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Check and Convert ISBN</h1>
      <small class="dont-index">Source: <a href="https://github.com/oeysan/c2z/blob/main/R/zotero_isbn.R" class="external-link"><code>R/zotero_isbn.R</code></a></small>
      <div class="d-none name"><code>CheckIsbn.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function processes an input string that contains an ISBN (or a compound string
where the first element is the ISBN). It first removes unwanted characters (keeping only digits, commas, and spaces),
then uses the <code>GoFish</code> function to further process the string. The function splits the cleaned string by spaces or commas
to extract a candidate ISBN. If the candidate ISBN is in ISBN10 format, it is converted to ISBN13 by prepending "978",
recalculating the check digit, and concatenating the result. Finally, the function validates that the resulting ISBN is a valid ISBN13,
i.e., it is 13 digits long and starts with either "978" or "979".</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">CheckIsbn</span><span class="op">(</span><span class="va">key</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-key">key<a class="anchor" aria-label="anchor" href="#arg-key"></a></dt>
<dd><p>A character string that contains an ISBN or a compound string where the first element is the ISBN.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A cleaned and validated ISBN string. If the resulting ISBN does not meet the expected criteria,
  the function returns <code>NULL</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The function performs the following steps:</p><ol><li><p>Cleans the input <code>key</code> by removing all characters except digits, commas, and spaces.</p></li>
<li><p>Processes the cleaned key using the <code>GoFish</code> function (which must be defined in your environment).</p></li>
<li><p>Splits the resulting string by spaces and commas to extract the first candidate ISBN.</p></li>
<li><p>If the candidate is in ISBN10 format (10 characters), it converts it to ISBN13 by:</p><ol><li><p>Converting the first 9 digits to numeric.</p></li>
<li><p>Prepending the ISBN13 prefix "978".</p></li>
<li><p>Calculating the ISBN13 check digit using alternating weights of 1 and 3.</p></li>
<li><p>Concatenating the digits to form the full ISBN13.</p></li>
</ol></li>
<li><p>Validates that the final key is a valid ISBN13 (i.e., 13 digits long and starting with "978" or "979").</p></li>
</ol></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Example with a compound string where the first part is the ISBN:</span></span></span>
<span class="r-in"><span><span class="va">isbn_input</span> <span class="op">&lt;-</span> <span class="st">"316148410X, some extra text"</span></span></span>
<span class="r-in"><span><span class="va">valid_isbn</span> <span class="op">&lt;-</span> <span class="fu">CheckIsbn</span><span class="op">(</span><span class="va">isbn_input</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example converting an ISBN10 to ISBN13:</span></span></span>
<span class="r-in"><span><span class="va">isbn10</span> <span class="op">&lt;-</span> <span class="st">"316148410X"</span></span></span>
<span class="r-in"><span><span class="va">valid_isbn</span> <span class="op">&lt;-</span> <span class="fu">CheckIsbn</span><span class="op">(</span><span class="va">isbn10</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Øystein Olav Skaar.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

