% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/zotero_isbn.R
\name{CheckIsbn}
\alias{CheckIsbn}
\title{Check and Convert ISBN}
\usage{
CheckIsbn(key)
}
\arguments{
\item{key}{A character string that contains an ISBN or a compound string where the first element is the ISBN.}
}
\value{
A cleaned and validated ISBN string. If the resulting ISBN does not meet the expected criteria,
  the function returns \code{NULL}.
}
\description{
This function processes an input string that contains an ISBN (or a compound string
where the first element is the ISBN). It first removes unwanted characters (keeping only digits, commas, and spaces),
then uses the \code{GoFish} function to further process the string. The function splits the cleaned string by spaces or commas
to extract a candidate ISBN. If the candidate ISBN is in ISBN10 format, it is converted to ISBN13 by prepending "978",
recalculating the check digit, and concatenating the result. Finally, the function validates that the resulting ISBN is a valid ISBN13,
i.e., it is 13 digits long and starts with either "978" or "979".
}
\details{
The function performs the following steps:
\enumerate{
  \item Cleans the input \code{key} by removing all characters except digits, commas, and spaces.
  \item Processes the cleaned key using the \code{GoFish} function (which must be defined in your environment).
  \item Splits the resulting string by spaces and commas to extract the first candidate ISBN.
  \item If the candidate is in ISBN10 format (10 characters), it converts it to ISBN13 by:
        \enumerate{
          \item Converting the first 9 digits to numeric.
          \item Prepending the ISBN13 prefix "978".
          \item Calculating the ISBN13 check digit using alternating weights of 1 and 3.
          \item Concatenating the digits to form the full ISBN13.
        }
  \item Validates that the final key is a valid ISBN13 (i.e., 13 digits long and starting with "978" or "979").
}
}
\examples{
\dontrun{
# Example with a compound string where the first part is the ISBN:
isbn_input <- "316148410X, some extra text"
valid_isbn <- CheckIsbn(isbn_input)

# Example converting an ISBN10 to ISBN13:
isbn10 <- "316148410X"
valid_isbn <- CheckIsbn(isbn10)
}

}
